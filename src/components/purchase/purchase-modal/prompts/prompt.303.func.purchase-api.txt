아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @01-common.mdc
            - @04-func.mdc

==============================================

조건-선행작업) prompt.301.func.modal-connect.txt와 prompt.302.func.point-check.txt가 먼저 완료되어야 합니다.

조건-파일경로) 수정할 파일 목록
            - src/components/purchase/detail/hook.ts (상세페이지 훅)
            - src/components/purchase/detail/index.tsx (상세페이지)
            - src/components/purchase/detail/styles.module.css (스타일)

==============================================

핵심요구사항) 포인트가 충분한 경우 포트원 결제를 연동하고 판매 등록 화면으로 이동할 것.

        1) 포트원 SDK 설치 및 import (src/components/purchase/detail/hook.ts)

            - 패키지 설치 확인
              npm install @portone/browser-sdk
              # 또는
              pnpm add @portone/browser-sdk

            - import 추가
              import { useRouter } from "next/navigation";
              import * as PortOne from "@portone/browser-sdk/v2";

            - 에러 상태 관리 추가
              const [errorMessage, setErrorMessage] = useState("");

        2) 환경 변수 설정 (.env.local)

            - 포트원 Store ID 추가
              # 포트원 결제 설정
              # 포트원 대시보드(https://admin.portone.io)에서 발급받은 가맹점 식별코드를 입력하세요
              NEXT_PUBLIC_PORTONE_STORE_ID=your-store-id-here

            - .env.example 파일도 생성하여 팀원들에게 공유

        3) handlePurchaseConfirm 함수 수정 (포트원 결제 연동)

              수정 전:
              // 2단계: 포인트 충분 (다음 프롬프트에서 구현 예정)
              console.log("포인트 충분 - 구매 진행");
              setIsPurchaseModalOpen(false);

              수정 후:
              // 2단계: 포트원 결제 요청
              try {
                // 주문 고유 ID 생성 (실제로는 서버에서 생성하는 것이 좋습니다)
                const orderId = `order_${new Date().getTime()}`;

                // 포트원 결제 요청
                const response = await PortOne.requestPayment({
                  // 가맹점 식별 코드 (포트원 대시보드에서 확인)
                  storeId: process.env.NEXT_PUBLIC_PORTONE_STORE_ID || "store-test-id",

                  // 결제 정보
                  paymentId: orderId,
                  orderName: accommodation?.title || "숙박권 구매",
                  totalAmount: accommodation?.price || 0,
                  currency: "CURRENCY_KRW",

                  // 결제 수단 (카드, 가상계좌, 계좌이체 등)
                  payMethod: "CARD",

                  // 구매자 정보 (실제로는 로그인한 사용자 정보 사용)
                  customer: {
                    customerId: "customer-id", // TODO: 실제 사용자 ID
                    fullName: "구매자", // TODO: 실제 구매자 이름
                    phoneNumber: "010-0000-0000", // TODO: 실제 전화번호
                  },
                });

                // 3단계: 결제 응답 처리
                if (response?.code != null) {
                  // 결제 실패
                  console.error("결제 실패:", response.message);
                  setErrorMessage(response.message || "결제에 실패했습니다.");
                  setIsPurchaseModalOpen(false);
                  return;
                }

                // 결제 성공
                console.log("결제 성공:", response);

                // TODO: 백엔드로 결제 검증 요청
                // const verifyResponse = await fetch('/api/payment/verify', {
                //   method: 'POST',
                //   headers: { 'Content-Type': 'application/json' },
                //   body: JSON.stringify({
                //     paymentId: response.paymentId,
                //     txId: response.txId,
                //   }),
                // });

                // 모달 닫기
                setIsPurchaseModalOpen(false);

                // 4단계: 판매 등록 화면으로 이동
                router.push("/purchase/sell");

              } catch (error) {
                // 5단계: 에러 처리
                console.error("결제 중 오류:", error);
                setErrorMessage("결제 중 오류가 발생했습니다. 다시 시도해주세요.");
                setIsPurchaseModalOpen(false);
              }

            - return 값에 추가
              errorMessage

        2) 에러 메시지 표시 (src/components/purchase/detail/index.tsx)

            - 훅에서 errorMessage 가져오기
              const { ..., errorMessage } = usePurchaseDetail();

            - 에러 메시지 UI 추가
              * 위치: 구매 버튼 위
              * 코드:
                {errorMessage && (
                  <div className={styles.errorMessage}>
                    {errorMessage}
                  </div>
                )}

        3) 에러 메시지 스타일 (src/components/purchase/detail/styles.module.css)

            .errorMessage {
              padding: 12px;
              margin-bottom: 16px;
              background-color: #fff2f0;
              border: 1px solid #ffccc7;
              border-radius: 4px;
              color: #ff4d4f;
              font-size: 14px;
            }

        4) 포트원 결제 완료 플로우

            구매하기 버튼 클릭
                    ↓
            handlePurchaseConfirm 실행
                    ↓
            1단계: 포인트 체크
                    ↓
            포인트 충분 확인
                    ↓
            2단계: 포트원 결제 요청
                    ↓
            포트원 결제 창 팝업
                    ↓
            사용자가 결제 정보 입력
                    ↓
            3단계: 결제 응답 처리
                    ↓
            결제 성공 시:
                    ↓
            콘솔에 "결제 성공" 로그 출력
                    ↓
            구매 모달 닫기
                    ↓
            4단계: /purchase/sell 이동
            (판매 등록 화면)

            만약 결제 실패 시:
                    ↓
            5단계: 에러 메시지 표시
                    ↓
            구매 모달 닫기
                    ↓
            페이지 이동 없음

        5) 테스트 체크리스트

            [환경 설정 확인]
            - [ ] @portone/browser-sdk 패키지가 설치되었는가?
            - [ ] .env.local에 NEXT_PUBLIC_PORTONE_STORE_ID가 설정되었는가?
            - [ ] .env.example 파일이 생성되었는가?
            - [ ] 개발 서버를 재시작했는가? (환경 변수 변경 시 필수)

            [포트원 SDK 연동 확인]
            - [ ] PortOne import가 정상적으로 작동하는가?
            - [ ] requestPayment 함수가 호출되는가?
            - [ ] 포트원 결제 창이 정상적으로 팝업되는가?

            [결제 요청 데이터 확인]
            - [ ] storeId가 올바르게 전달되는가?
            - [ ] paymentId(주문ID)가 고유하게 생성되는가?
            - [ ] orderName(숙박권 제목)이 올바르게 전달되는가?
            - [ ] totalAmount(가격)가 올바르게 전달되는가?
            - [ ] currency가 "CURRENCY_KRW"로 설정되었는가?
            - [ ] payMethod가 "CARD"로 설정되었는가?
            - [ ] customer 정보가 올바르게 전달되는가?

            [결제 성공 처리]
            - [ ] 결제 성공 시 콘솔에 "결제 성공" 로그가 출력되는가?
            - [ ] response 객체에 결제 정보가 포함되어 있는가?
            - [ ] 구매 모달이 자동으로 닫히는가?
            - [ ] /purchase/sell (판매 등록 화면)로 이동하는가?

            [결제 실패 처리]
            - [ ] 결제 실패 시 response.code가 있는 경우 감지되는가?
            - [ ] 에러 메시지가 올바르게 표시되는가?
            - [ ] 에러 발생 시 페이지 이동이 중단되는가?
            - [ ] 에러 발생 시에도 모달이 닫히는가?

            [라우팅 확인]
            - [ ] router.push("/purchase/sell")가 정상 실행되는가?
            - [ ] 판매 등록 화면이 정상적으로 로드되는가?
            - [ ] 브라우저 URL이 /purchase/sell로 변경되는가?

            [전체 플로우 통합 테스트]
            - [ ] 상세페이지 → 구매 버튼 → 구매 모달 → 구매하기 → 포트원 결제 → 판매 등록 화면 순서가 정상적으로 작동하는가?
            - [ ] 포인트 부족 시 PointAlertModal이 표시되고 결제가 중단되는가?
            - [ ] 포인트 충분 시 포트원 결제 창이 열리는가?
            - [ ] 결제 성공 시 판매 등록 화면으로 이동하는가?
            - [ ] 결제 취소 시 모달만 닫히고 페이지 이동이 없는가?

==============================================

참고사항)
1. 이 프롬프트는 포트원 결제 SDK 연동과 라우팅을 담당합니다.

2. 포트원 가맹점 설정 필수:
   - https://admin.portone.io 에서 회원가입
   - 가맹점 생성 및 Store ID 발급
   - .env.local에 실제 Store ID 입력

3. 백엔드 결제 검증 (TODO):
   - 클라이언트 결제 성공 후 반드시 백엔드에서 검증 필요
   - 포트원 API를 통해 결제 정보 재확인
   - 위변조 방지를 위한 필수 단계

4. 구매자 정보 (TODO):
   - customer 정보를 실제 로그인 사용자 정보로 교체
   - 사용자 인증 후 실제 ID, 이름, 전화번호 사용

5. 보안 주의사항:
   - Store ID는 공개되어도 되지만, API Secret은 절대 노출 금지
   - API Secret은 백엔드에서만 사용
   - 결제 검증은 반드시 백엔드에서 처리

6. 환경 변수 변경 시:
   - 개발 서버 재시작 필수 (npm run dev 또는 pnpm dev)
   - .env.example 파일로 팀원들과 공유

7. 테스트 모드:
   - 포트원 대시보드에서 테스트 모드 사용 가능
   - 실제 결제 없이 테스트 가능

8. 이 프롬프트 완료 후:
   - 포트원 결제 기본 연동 완료
   - 추가로 백엔드 결제 검증 API 구현 필요
   - 결제 내역 저장 및 관리 기능 추가 권장
