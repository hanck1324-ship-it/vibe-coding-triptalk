---
description: "TDD 기반 게시글 목록(boards-list) 기능 구현 (Apollo Client + Playwright)"
globs: [
  "src/components/boards-list/index.tsx",
  "src/components/boards-list/hook.ts",
  "src/components/boards-list/quires.ts",
  "src/components/boards-list/styles.module.css",
  "src/app/boards/page.tsx"
]
alwaysApply: false
---
아래의 조건 및 주의사항을 모두 적용하여 코드를 작성할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
        - @01-common.mdc
        - @04-func.mdc (TDD 규칙이 있다면)

==============================================

조건-파일경로) 참고할 API 문서경로: https://main-practice.codebootcamp.co.kr/graphql
조건-파일경로) 구현될 페이지 경로: src/app/boards/page.tsx
조건-파일경로) 구현될 TSX 파일경로: src/components/boards-list/index.tsx
조건-파일경로) 구현될 HOOK 파일경로: src/components/boards-list/hook.ts
조건-파일경로) 구현될 GQL 파일경로: src/components/boards-list/quires.ts
조건-파일경로) (참고) 공통 GQL 타입: src/commons/graphql/graphql.ts (codegen으로 생성된 타입 사용)

==============================================

핵심요구사항) Playwright 테스트를 활용하여 TDD 기반으로 다음 기능을 구현하고, 테스트에 통과할 때까지 반복할 것.

        1) 테스트 조건
            - /boards 페이지가 완전히 로드된 후 테스트할 것.
            - data-testid를 사용하여 요소를 식별할 것.
            - API 모킹은 사용하지 말 것. (실제 데이터 사용)

        2) TDD 시나리오 (목록 조회 및 이동)
            - 1. /boards 페이지로 이동한다.
            - 2. (네트워크 대기) 'fetchBoards' GraphQL 요청의 응답을 기다린다.
            - 3. 'data-testid="board-item-0"' (첫 번째 게시물)가 렌더링되었는지 확인한다.
            - 4. 해당 아이템을 클릭한다.
            - 5. 페이지 URL이 /boards/main/[boardId] (예: /boards/main/...) 형태의 상세 페이지로 이동했는지 확인한다.

        3) (응용) TDD 시나리오 (페이지네이션)
            - 1. /boards 페이지로 이동한다.
            - 2. 'fetchBoards' 요청을 기다린다.
            - 3. 'data-testid="pagination-next-button"' (다음 버튼)을 클릭한다.
            - 4. (네트워크 대기) 'fetchBoards' GraphQL 요청(page: 2)이 새로 발생하는지 기다린다.
            - 5. 페이지 URL의 쿼리 스트링이 '?page=2'로 변경되었는지 확인한다.

==============================================

핵심요구사항) 다음의 조건에 맞게 게시글 목록 기능을 step-by-step 으로 구현하고, 적용 결과를 체크리스트로 반환할 것.

        1) 라이브러리조건
            - API: @apollo/client의 useQuery 훅을 사용할 것.
            - 타입: @/commons/graphql/graphql에서 codegen으로 생성된 타입을 사용할 것.
            - 라우팅: next/navigation의 useRouter 훅을 사용할 것.

        2) 기능 요구사항
            - 1. (GQL) src/components/boards-list/quires.ts 파일에 fetchBoards 쿼리를 정의할 것.
                - Query: fetchBoards
                - Variables: page (Int)
                - 응답데이터: _id, writer, title, createdAt
                - gql template literal 사용 (import { gql } from "@apollo/client")

            - 2. (HOOK) src/components/boards-list/hook.ts 파일에 커스텀 훅을 만들 것.
                - "use client" 지시어 추가
                - useQuery를 사용하여 fetchBoards 쿼리 요청
                - codegen으로 생성된 FetchBoardsDocument 타입 사용
                - 'page' 값을 관리하는 state (useState, 기본값 1)를 생성할 것.
                - 페이지네이션 버튼 클릭 시 'page' state를 변경하고, 변경된 page 값으로 쿼리를 재요청(refetch)할 것.
                - 게시글 아이템 클릭 시, 해당 ID를 가진 상세 페이지(/boards/main/[boardId])로 이동시키는 함수를 반환할 것.
                - useRouter의 push 메서드 사용
            
            - 3. (UI) src/components/boards-list/index.tsx 파일에 UI를 구현할 것.
                - "use client" 지시어 추가
                - hook.ts에서 만든 훅을 사용하여 데이터를 바인딩할 것.
                - fetchBoards로 받아온 데이터를 목록 형태로 렌더링할 것. (writer, title, createdAt)
                - 각 행(item)에 data-testid="board-item-[index]"를 부여할 것.
                - 각 행(item) 클릭 시 훅에서 만든 라우팅 함수를 실행할 것.
                - (임시) 페이지네이션 UI: '이전', '다음' 버튼을 만들고 data-testid="pagination-prev-button", data-testid="pagination-next-button"를 부여할 것.
                - CSS Modules 사용 (styles.module.css)

